{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/CycleForm.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Calendar, Activity, Heart, Clock, Trash2, Pencil } from \"lucide-react\";\nimport { useAppContext } from \"../context/AppContext\";\nimport { useForm } from \"react-hook-form\";\n\nconst CycleForm = () => {\n  const { cycles, fetchCycles, token } = useAppContext();\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm();\n  const [isEditing, setIsEditing] = useState(false);\n  const [editId, setEditId] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  // Predefined options\n  const moodOptions = [\"Happy\", \"Sad\", \"Anxious\", \"Irritable\", \"Calm\"];\n  const symptomOptions = [\n    \"Cramps\",\n    \"Fatigue\",\n    \"Headache\",\n    \"Bloating\",\n    \"Nausea\",\n  ];\n\n  const resetForm = useCallback(() => {\n    reset({ startDate: \"\", length: \"\", symptoms: [], mood: \"\" });\n    setIsEditing(false);\n    setEditId(null);\n    setError(\"\");\n    setSuccess(\"\");\n  }, [reset]);\n\n  const submitCycle = useCallback(\n    async (cycleData, method, id) => {\n      setLoading(true);\n      setError(\"\");\n      setSuccess(\"\");\n\n      try {\n        if (!token) {\n          throw new Error(\"Authentication token not found\");\n        }\n\n        const url = id\n          ? `http://localhost:8080/api/cycles/${id}`\n          : \"http://localhost:8080/api/cycles\";\n\n        const res = await fetch(url, {\n          method,\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(cycleData),\n        });\n\n        if (!res.ok) {\n          const result = await res.json().catch(() => ({}));\n          throw new Error(\n            result.message || `HTTP ${res.status}: Failed to save cycle`\n          );\n        }\n\n        resetForm();\n        await fetchCycles(); // Ensure cycles are refreshed\n        setSuccess(\"Cycle saved successfully!\");\n\n        // Clear success message after 3 seconds\n        setTimeout(() => setSuccess(\"\"), 3000);\n      } catch (err) {\n        console.error(\"Submit error:\", err);\n        setError(err.message || \"Network error. Please try again.\");\n      } finally {\n        setLoading(false);\n      }\n    },\n    [fetchCycles, resetForm, token]\n  );\n\n  const onSubmit = async (data) => {\n    setError(\"\");\n    setSuccess(\"\");\n\n    // Validate data\n    if (!data.startDate) {\n      setError(\"Start date is required\");\n      return;\n    }\n\n    if (!data.length || data.length < 1 || data.length > 99) {\n      setError(\"Cycle length must be between 1 and 99 days\");\n      return;\n    }\n\n    const cycleData = {\n      startDate: data.startDate,\n      length: parseInt(data.length),\n      symptoms: Array.isArray(data.symptoms) ? data.symptoms.join(\",\") : \"\",\n      mood: data.mood || \"\",\n    };\n\n    await submitCycle(cycleData, isEditing ? \"PUT\" : \"POST\", editId);\n  };\n\n  const handleEdit = (cycle) => {\n    if (!cycle) return;\n\n    setValue(\"startDate\", cycle.startDate);\n    setValue(\"length\", cycle.length);\n    setValue(\"symptoms\", cycle.symptoms ? cycle.symptoms.split(\",\") : []);\n    setValue(\"mood\", cycle.mood || \"\");\n    setEditId(cycle.ID);\n    setIsEditing(true);\n    setError(\"\");\n    setSuccess(\"\");\n  };\n\n  const handleDelete = async (id) => {\n    if (!confirm(\"Are you sure you want to delete this entry?\")) return;\n\n    setLoading(true);\n    try {\n      if (!token) {\n        throw new Error(\"Authentication token not found\");\n      }\n\n      const res = await fetch(`http://localhost:8080/api/cycles/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (!res.ok) {\n        const result = await res.json().catch(() => ({}));\n        throw new Error(result.message || \"Failed to delete entry\");\n      }\n\n      await fetchCycles();\n      setSuccess(\"Entry deleted successfully!\");\n      setTimeout(() => setSuccess(\"\"), 3000);\n    } catch (err) {\n      console.error(\"Delete error:\", err);\n      setError(err.message || \"Failed to delete entry\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Auto-clear error messages after 5 seconds\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => setError(\"\"), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error]);\n\n  return (\n    <div className=\"min-h-screen w-full bg-pink-50 dark:bg-gray-900 p-6\">\n      <div className=\"max-w-4xl mx-auto text-center mb-8\">\n        <h1 className=\"text-gray-700 dark:text-gray-200 text-xl\">\n          Track your cycles accurately and gain valuable health insights.\n        </h1>\n      </div>\n\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        className=\"max-w-4xl mx-auto p-8 rounded-3xl bg-[#1B2433] shadow-xl\"\n      >\n        <h2 className=\"text-3xl font-semibold mb-8 text-white text-center\">\n          {isEditing ? \"Edit Cycle\" : \"Cycle Journal\"}\n        </h2>\n\n        {/* Feedback messages */}\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg\">\n            <p className=\"text-red-800 dark:text-red-200 text-sm\">{error}</p>\n          </div>\n        )}\n        {success && (\n          <div className=\"mb-4 p-3 bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-700 rounded-lg\">\n            <p className=\"text-green-800 dark:text-green-200 text-sm\">\n              {success}\n            </p>\n          </div>\n        )}\n\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          <div className=\"space-y-6\">\n            <label className=\"block text-sm text-gray-300\">\n              <Calendar className=\"inline w-4 h-4 mr-2\" />\n              Start Date\n              <input\n                type=\"date\"\n                {...register(\"startDate\", {\n                  required: \"Start date is required\",\n                })}\n                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-[#2A3441] text-gray-200 border border-gray-600 focus:border-pink-500 focus:outline-none\"\n                max={new Date().toISOString().split(\"T\")[0]} // Prevent future dates\n              />\n              {errors.startDate && (\n                <p className=\"text-red-400 text-sm mt-1\">\n                  {errors.startDate.message}\n                </p>\n              )}\n            </label>\n\n            <label className=\"block text-sm text-gray-300\">\n              <Clock className=\"inline w-4 h-4 mr-2\" />\n              Cycle Length (Days)\n              <input\n                type=\"number\"\n                {...register(\"length\", {\n                  required: \"Cycle length is required\",\n                  min: { value: 1, message: \"Minimum 1 day\" },\n                  max: { value: 99, message: \"Maximum 99 days\" },\n                })}\n                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-[#2A3441] text-gray-200 border border-gray-600 focus:border-pink-500 focus:outline-none\"\n                min=\"1\"\n                max=\"99\"\n              />\n              {errors.length && (\n                <p className=\"text-red-400 text-sm mt-1\">\n                  {errors.length.message}\n                </p>\n              )}\n            </label>\n\n            <label className=\"block text-sm text-gray-300\">\n              <Heart className=\"inline w-4 h-4 mr-2\" />\n              Mood\n              <select\n                {...register(\"mood\")}\n                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-[#2A3441] text-gray-200 border border-gray-600 focus:border-pink-500 focus:outline-none\"\n              >\n                <option value=\"\">Select mood</option>\n                {moodOptions.map((mood) => (\n                  <option key={mood} value={mood}>\n                    {mood}\n                  </option>\n                ))}\n              </select>\n            </label>\n          </div>\n\n          <label className=\"block text-sm text-gray-300\">\n            <Activity className=\"inline w-4 h-4 mr-2\" />\n            Symptoms\n            <div className=\"mt-2 space-y-2 max-h-40 overflow-y-auto\">\n              {symptomOptions.map((symptom) => (\n                <label\n                  key={symptom}\n                  className=\"flex items-center text-gray-300 hover:text-white\"\n                >\n                  <input\n                    type=\"checkbox\"\n                    value={symptom}\n                    {...register(\"symptoms\")}\n                    className=\"mr-2 text-pink-500 focus:ring-pink-500\"\n                  />\n                  {symptom}\n                </label>\n              ))}\n            </div>\n            {errors.symptoms && (\n              <p className=\"text-red-400 text-sm mt-1\">\n                {errors.symptoms.message}\n              </p>\n            )}\n          </label>\n        </div>\n\n        <div className=\"mt-8 flex justify-between items-center\">\n          <button\n            type=\"submit\"\n            className=\"px-8 py-3 rounded-xl bg-pink-500 hover:bg-pink-600 disabled:bg-pink-300 disabled:cursor-not-allowed text-white font-medium text-lg transition-colors\"\n            disabled={loading}\n          >\n            {loading\n              ? isEditing\n                ? \"Updating...\"\n                : \"Saving...\"\n              : isEditing\n              ? \"Update Entry\"\n              : \"Save Entry\"}\n          </button>\n\n          {isEditing && (\n            <button\n              type=\"button\"\n              onClick={resetForm}\n              className=\"text-sm text-gray-300 hover:text-white underline\"\n              disabled={loading}\n            >\n              Cancel Edit\n            </button>\n          )}\n        </div>\n      </form>\n\n      {/* Past Entries Section */}\n      <div className=\"max-w-4xl mx-auto mt-12\">\n        <h3 className=\"text-xl font-medium mb-4 text-gray-800 dark:text-white\">\n          Past Entries ({cycles.length})\n        </h3>\n\n        {cycles.length === 0 ? (\n          <div className=\"text-center py-12 bg-white dark:bg-[#2A3441] rounded-xl\">\n            <div className=\"text-6xl mb-4\">📝</div>\n            <p className=\"text-gray-500 dark:text-gray-400\">No entries yet</p>\n            <p className=\"text-sm text-gray-400 dark:text-gray-500 mt-2\">\n              Your cycle entries will appear here after you save them\n            </p>\n          </div>\n        ) : (\n          <ul className=\"space-y-4\">\n            {cycles.map((entry) => (\n              <li\n                key={entry.ID}\n                className=\"bg-white dark:bg-[#2A3441] rounded-xl p-4 shadow flex justify-between items-center hover:shadow-lg transition-shadow\"\n              >\n                <div>\n                  <p className=\"text-gray-900 dark:text-gray-100 font-medium\">\n                    {new Date(entry.startDate).toLocaleDateString()} -{\" \"}\n                    {entry.length} days\n                  </p>\n                  <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                    <span className=\"font-medium\">Mood:</span>{\" \"}\n                    {entry.mood || \"Not specified\"} |\n                    <span className=\"font-medium ml-2\">Symptoms:</span>{\" \"}\n                    {entry.symptoms || \"None\"}\n                  </p>\n                </div>\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => handleEdit(entry)}\n                    className=\"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors\"\n                    title=\"Edit\"\n                    disabled={loading}\n                  >\n                    <Pencil className=\"w-5 h-5\" />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(entry.ID)}\n                    className=\"text-red-500 hover:text-red-700 p-1 rounded transition-colors\"\n                    title=\"Delete\"\n                    disabled={loading}\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CycleForm;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/HealthInsights.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from \"recharts\";\nimport { useAppContext } from \"../context/AppContext\";\n\nconst HealthInsights = () => {\n  const { cycles, token } = useAppContext();\n  const [insights, setInsights] = useState({\n    totalCycles: 0,\n    averageLength: 0,\n    nextPeriod: null,\n    fertileWindow: [],\n    irregularity: 0,\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchInsights = async () => {\n      if (!token) {\n        setError(\"Authentication required\");\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const res = await fetch(\"http://localhost:8080/api/insights/cycle\", {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        });\n\n        if (res.status === 401) {\n          setError(\"Session expired. Please log in again.\");\n          return;\n        }\n\n        if (!res.ok) {\n          const errorData = await res.json().catch(() => ({}));\n          throw new Error(\n            errorData.message || `HTTP ${res.status}: Failed to fetch insights`\n          );\n        }\n\n        const data = await res.json();\n\n        setInsights({\n          totalCycles: cycles.length,\n          averageLength: data.averageCycleLength || 0,\n          nextPeriod: data.nextPeriodPrediction || null,\n          fertileWindow: data.fertileWindow || [],\n          irregularity: data.irregularityIndex || 0,\n        });\n      } catch (err) {\n        console.error(\"Failed to fetch insights:\", err);\n        setError(err.message || \"Failed to load insights data\");\n\n        // Fallback to basic calculations from cycles data\n        if (cycles.length > 0) {\n          const avgLength =\n            cycles.reduce((sum, cycle) => sum + cycle.length, 0) /\n            cycles.length;\n          setInsights({\n            totalCycles: cycles.length,\n            averageLength: avgLength,\n            nextPeriod: null,\n            fertileWindow: [],\n            irregularity: 0,\n          });\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchInsights();\n  }, [token, cycles]);\n\n  // Prepare chart data\n  const chartData = cycles.map((cycle, index) => ({\n    cycle: `Cycle ${index + 1}`,\n    date: new Date(cycle.startDate).toLocaleDateString(),\n    length: cycle.length,\n  }));\n\n  // Loading state\n  if (loading) {\n    return (\n      <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n        <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n          Health Insights\n        </h2>\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n        <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n          Health Insights\n        </h2>\n        <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n          <p className=\"text-red-800 dark:text-red-200 text-sm\">{error}</p>\n          <p className=\"text-red-600 dark:text-red-400 text-xs mt-2\">\n            Showing basic calculations from your cycle data.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n      <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n        Health Insights\n      </h2>\n\n      {cycles.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"text-6xl mb-4\">📊</div>\n          <p className=\"text-foreground/80 text-lg mb-2\">\n            No data to analyze yet\n          </p>\n          <p className=\"text-foreground/60 text-sm\">\n            Track at least 2 cycles to see detailed health insights and\n            predictions.\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {/* Cycle Summary */}\n          <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-lg bg-light-bg/50 dark:bg-dark-bg/50\">\n            <h3 className=\"text-lg font-medium text-foreground mb-3\">\n              Cycle Summary\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-foreground\">\n                  <strong>Total Cycles Logged:</strong>{\" \"}\n                  <span className=\"text-pink-500 font-bold\">\n                    {insights.totalCycles}\n                  </span>\n                </p>\n                <p className=\"text-foreground mt-2\">\n                  <strong>Average Cycle Length:</strong>{\" \"}\n                  <span className=\"text-pink-500 font-bold\">\n                    {insights.averageLength.toFixed(1)} days\n                  </span>\n                </p>\n              </div>\n              <div>\n                <p className=\"text-foreground\">\n                  <strong>Next Period Prediction:</strong>{\" \"}\n                  <span className=\"text-blue-500 font-bold\">\n                    {insights.nextPeriod || \"Calculating...\"}\n                  </span>\n                </p>\n                <p className=\"text-foreground mt-2\">\n                  <strong>Irregularity Index:</strong>{\" \"}\n                  <span\n                    className={`font-bold ${\n                      insights.irregularity < 0.3\n                        ? \"text-green-500\"\n                        : insights.irregularity < 0.6\n                        ? \"text-yellow-500\"\n                        : \"text-red-500\"\n                    }`}\n                  >\n                    {insights.irregularity.toFixed(2)}\n                  </span>\n                </p>\n              </div>\n            </div>\n\n            {insights.fertileWindow.length > 0 && (\n              <p className=\"text-foreground mt-3\">\n                <strong>Fertile Window:</strong>{\" \"}\n                <span className=\"text-purple-500 font-bold\">\n                  {insights.fertileWindow.join(\" to \")}\n                </span>\n              </p>\n            )}\n          </div>\n\n          {/* Cycle Length Trend Chart */}\n          <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-lg bg-light-bg/50 dark:bg-dark-bg/50\">\n            <h3 className=\"text-lg font-medium text-foreground mb-4\">\n              Cycle Length Trend\n            </h3>\n            {chartData.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\n                  <XAxis dataKey=\"cycle\" stroke=\"#9CA3AF\" fontSize={12} />\n                  <YAxis stroke=\"#9CA3AF\" fontSize={12} />\n                  <Tooltip\n                    contentStyle={{\n                      backgroundColor: \"#1F2937\",\n                      border: \"1px solid #374151\",\n                      borderRadius: \"8px\",\n                      color: \"#F3F4F6\",\n                    }}\n                  />\n                  <Legend />\n                  <Bar\n                    dataKey=\"length\"\n                    fill=\"#EC4899\"\n                    name=\"Cycle Length (days)\"\n                    radius={[4, 4, 0, 0]}\n                  />\n                </BarChart>\n              </ResponsiveContainer>\n            ) : (\n              <div className=\"text-center py-8\">\n                <p className=\"text-foreground/60\">No chart data available</p>\n              </div>\n            )}\n          </div>\n\n          {/* Health Tips */}\n          <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-lg bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20\">\n            <h3 className=\"text-lg font-medium text-foreground mb-3\">\n              💡 Health Tips\n            </h3>\n            <div className=\"space-y-2 text-sm\">\n              {insights.averageLength < 21 && (\n                <p className=\"text-orange-700 dark:text-orange-300\">\n                  Your cycles are shorter than average. Consider consulting a\n                  healthcare provider.\n                </p>\n              )}\n              {insights.averageLength > 35 && (\n                <p className=\"text-orange-700 dark:text-orange-300\">\n                  Your cycles are longer than average. Consider consulting a\n                  healthcare provider.\n                </p>\n              )}\n              {insights.irregularity > 0.5 && (\n                <p className=\"text-red-700 dark:text-red-300\">\n                  Your cycles show high irregularity. Track stress, diet, and\n                  exercise patterns.\n                </p>\n              )}\n              {insights.irregularity <= 0.3 && insights.totalCycles > 3 && (\n                <p className=\"text-green-700 dark:text-green-300\">\n                  Great! Your cycles are quite regular. Keep up your healthy\n                  habits.\n                </p>\n              )}\n              <p className=\"text-gray-700 dark:text-gray-300\">\n                Regular tracking helps identify patterns and potential health\n                concerns early.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HealthInsights;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1213, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/utils/cyclePredictor.js"],"sourcesContent":["export class EnhancedCyclePredictor {\n  constructor(history = []) {\n    this.history = history; // List of { startDate, length }\n  }\n\n  predictNextCycle() {\n    if (this.history.length < 2) return null;\n\n    const sorted = [...this.history].sort(\n      (a, b) => new Date(a.startDate) - new Date(b.startDate)\n    );\n\n    const lengths = [];\n    for (let i = 1; i < sorted.length; i++) {\n      const prev = new Date(sorted[i - 1].startDate);\n      const curr = new Date(sorted[i].startDate);\n      lengths.push((curr - prev) / (1000 * 60 * 60 * 24));\n    }\n\n    const avgLength = lengths.reduce((a, b) => a + b) / lengths.length;\n    const stdDev = Math.sqrt(\n      lengths.map((x) => Math.pow(x - avgLength, 2)).reduce((a, b) => a + b) /\n        lengths.length\n    );\n\n    const lastStart = new Date(sorted[sorted.length - 1].startDate);\n    const predicted = new Date(\n      lastStart.getTime() + avgLength * 24 * 60 * 60 * 1000\n    );\n\n    const fertileStart = new Date(\n      lastStart.getTime() + (avgLength - 14 - 5) * 24 * 60 * 60 * 1000\n    );\n    const fertileEnd = new Date(\n      lastStart.getTime() + (avgLength - 14 + 5) * 24 * 60 * 60 * 1000\n    );\n\n    return {\n      predictedStartDate: predicted.toISOString().split(\"T\")[0],\n      confidenceInterval: [\n        new Date(predicted.getTime() - stdDev * 24 * 60 * 60 * 1000)\n          .toISOString()\n          .split(\"T\")[0],\n        new Date(predicted.getTime() + stdDev * 24 * 60 * 60 * 1000)\n          .toISOString()\n          .split(\"T\")[0],\n      ],\n      averageCycleLength: avgLength.toFixed(1),\n      irregularityIndex: stdDev.toFixed(2),\n      fertileWindow: [\n        fertileStart.toISOString().split(\"T\")[0],\n        fertileEnd.toISOString().split(\"T\")[0],\n      ],\n    };\n  }\n\n  addCycle(cycleEntry) {\n    this.history.push(cycleEntry);\n  }\n}\n"],"names":[],"mappings":";;;AAAO,MAAM;IACX,YAAY,UAAU,EAAE,CAAE;QACxB,IAAI,CAAC,OAAO,GAAG,SAAS,gCAAgC;IAC1D;IAEA,mBAAmB;QACjB,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,OAAO;QAEpC,MAAM,SAAS;eAAI,IAAI,CAAC,OAAO;SAAC,CAAC,IAAI,CACnC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS;QAGxD,MAAM,UAAU,EAAE;QAClB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;YACtC,MAAM,OAAO,IAAI,KAAK,MAAM,CAAC,IAAI,EAAE,CAAC,SAAS;YAC7C,MAAM,OAAO,IAAI,KAAK,MAAM,CAAC,EAAE,CAAC,SAAS;YACzC,QAAQ,IAAI,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;QACnD;QAEA,MAAM,YAAY,QAAQ,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,QAAQ,MAAM;QAClE,MAAM,SAAS,KAAK,IAAI,CACtB,QAAQ,GAAG,CAAC,CAAC,IAAM,KAAK,GAAG,CAAC,IAAI,WAAW,IAAI,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,KAClE,QAAQ,MAAM;QAGlB,MAAM,YAAY,IAAI,KAAK,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE,CAAC,SAAS;QAC9D,MAAM,YAAY,IAAI,KACpB,UAAU,OAAO,KAAK,YAAY,KAAK,KAAK,KAAK;QAGnD,MAAM,eAAe,IAAI,KACvB,UAAU,OAAO,KAAK,CAAC,YAAY,KAAK,CAAC,IAAI,KAAK,KAAK,KAAK;QAE9D,MAAM,aAAa,IAAI,KACrB,UAAU,OAAO,KAAK,CAAC,YAAY,KAAK,CAAC,IAAI,KAAK,KAAK,KAAK;QAG9D,OAAO;YACL,oBAAoB,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACzD,oBAAoB;gBAClB,IAAI,KAAK,UAAU,OAAO,KAAK,SAAS,KAAK,KAAK,KAAK,MACpD,WAAW,GACX,KAAK,CAAC,IAAI,CAAC,EAAE;gBAChB,IAAI,KAAK,UAAU,OAAO,KAAK,SAAS,KAAK,KAAK,KAAK,MACpD,WAAW,GACX,KAAK,CAAC,IAAI,CAAC,EAAE;aACjB;YACD,oBAAoB,UAAU,OAAO,CAAC;YACtC,mBAAmB,OAAO,OAAO,CAAC;YAClC,eAAe;gBACb,aAAa,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBACxC,WAAW,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;aACvC;QACH;IACF;IAEA,SAAS,UAAU,EAAE;QACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IACpB;AACF","debugId":null}},
    {"offset": {"line": 1261, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/CycleHistory.js"],"sourcesContent":["\"use client\";\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { EnhancedCyclePredictor } from \"../utils/cyclePredictor\";\n\nconst CycleHistory = ({ cycles = [], loading = false, error = null }) => {\n  const prediction = useMemo(() => {\n    if (cycles.length < 2) return null;\n\n    try {\n      const formattedHistory = cycles.map((cycle) => ({\n        startDate: cycle.startDate,\n        length: cycle.length,\n      }));\n\n      const predictor = new EnhancedCyclePredictor(formattedHistory);\n      return predictor.predictNextCycle();\n    } catch (err) {\n      console.error(\"Error predicting cycle:\", err);\n      return null;\n    }\n  }, [cycles]);\n\n  // Loading state\n  if (loading) {\n    return (\n      <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n        <h2 className=\"text-xl font-semibold mb-4 text-foreground\">\n          Cycle History\n        </h2>\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n        <h2 className=\"text-xl font-semibold mb-4 text-foreground\">\n          Cycle History\n        </h2>\n        <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n          <p className=\"text-red-800 dark:text-red-200 text-sm\">{error}</p>\n          <p className=\"text-red-600 dark:text-red-400 text-xs mt-2\">\n            Please try refreshing the page or contact support if the problem\n            persists.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n      <h2 className=\"text-xl font-semibold mb-4 text-foreground\">\n        Cycle History\n      </h2>\n\n      {prediction && (\n        <div className=\"mb-6 p-4 bg-accent/10 border border-accent/30 rounded-lg\">\n          <h3 className=\"text-lg font-medium mb-2 text-accent\">\n            Cycle Prediction\n          </h3>\n          <p className=\"text-foreground\">\n            <strong>Next Start Date:</strong> {prediction.predictedStartDate}\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Confidence Range:</strong>{\" \"}\n            {prediction.confidenceInterval[0]} →{\" \"}\n            {prediction.confidenceInterval[1]}\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Average Cycle Length:</strong>{\" \"}\n            {prediction.averageCycleLength} days\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Irregularity Index:</strong> {prediction.irregularityIndex}\n          </p>\n        </div>\n      )}\n\n      {cycles.length > 0 ? (\n        <ul className=\"space-y-4 overflow-y-auto max-h-[calc(100vh-12rem)]\">\n          {cycles.map((cycle, index) => (\n            <li\n              key={cycle.ID || index}\n              className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md \n                         bg-light-bg/50 dark:bg-dark-bg/50 \n                         transition-colors duration-300 ease\"\n            >\n              <p className=\"text-foreground\">\n                <strong>Start Date: </strong>\n                {new Date(cycle.startDate).toLocaleDateString()}\n              </p>\n              <p className=\"text-foreground\">\n                <strong>Cycle Length:</strong> {cycle.length} days\n              </p>\n              <p className=\"text-foreground\">\n                <strong>Symptoms:</strong> {cycle.symptoms || \"None\"}\n              </p>\n              <p className=\"text-foreground\">\n                <strong>Mood:</strong> {cycle.mood || \"Not specified\"}\n              </p>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <div className=\"text-center py-12\">\n          <div className=\"text-6xl mb-4\">📅</div>\n          <p className=\"text-foreground/80 text-lg mb-2\">\n            No cycles logged yet.\n          </p>\n          <p className=\"text-foreground/60 text-sm\">\n            Start tracking your cycles to see your history and predictions here.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nCycleHistory.propTypes = {\n  cycles: PropTypes.arrayOf(\n    PropTypes.shape({\n      ID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      startDate: PropTypes.string.isRequired,\n      length: PropTypes.number.isRequired,\n      symptoms: PropTypes.string,\n      mood: PropTypes.string,\n    })\n  ).isRequired,\n  loading: PropTypes.bool,\n  error: PropTypes.string,\n};\n\nexport default CycleHistory;\n"],"names":[],"mappings":"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","debugId":null}}]
}