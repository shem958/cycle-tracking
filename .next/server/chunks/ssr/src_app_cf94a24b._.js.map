{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/CycleForm.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Calendar, Activity, Heart, Clock, Trash2, Pencil } from \"lucide-react\";\nimport { useAppContext } from \"../context/AppContext\";\nimport { useForm } from \"react-hook-form\";\nimport { openDB } from \"idb\";\n\nconst CycleForm = () => {\n  const { cycles, setCycles, fetchCycles } = useAppContext();\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm();\n  const [isEditing, setIsEditing] = useState(false);\n  const [editId, setEditId] = useState(null);\n\n  // Predefined options\n  const moodOptions = [\"Happy\", \"Sad\", \"Anxious\", \"Irritable\", \"Calm\"];\n  const symptomOptions = [\n    \"Cramps\",\n    \"Fatigue\",\n    \"Headache\",\n    \"Bloating\",\n    \"Nausea\",\n  ];\n\n  const resetForm = () => {\n    reset({ startDate: \"\", length: \"\", symptoms: [], mood: \"\" });\n    setIsEditing(false);\n    setEditId(null);\n  };\n\n  const submitCycle = useCallback(\n    async (cycleData, method, id) => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const url = id\n          ? `http://localhost:8080/api/cycles/${id}`\n          : \"http://localhost:8080/api/cycles\";\n        const res = await fetch(url, {\n          method,\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(cycleData),\n        });\n\n        if (res.ok) {\n          resetForm();\n          fetchCycles();\n        } else {\n          throw new Error(\"Failed to save cycle\");\n        }\n      } catch (error) {\n        console.error(\"Submit error:\", error);\n      }\n    },\n    [fetchCycles, resetForm]\n  ); // Add resetForm here\n\n  const syncPendingCycles = useCallback(\n    async (db) => {\n      const tx = db.transaction(\"pendingCycles\", \"readwrite\");\n      const store = tx.objectStore(\"pendingCycles\");\n      const pending = await store.getAll();\n      for (const cycle of pending) {\n        await submitCycle(cycle, cycle.id ? \"PUT\" : \"POST\", cycle.id);\n        await store.delete(cycle.id);\n      }\n    },\n    [submitCycle]\n  ); // Add submitCycle as a dependency\n\n  // Initialize IndexedDB\n  useEffect(() => {\n    const initDB = async () => {\n      const db = await openDB(\"CycleTrackerDB\", 1, {\n        upgrade(db) {\n          db.createObjectStore(\"pendingCycles\", { keyPath: \"id\" });\n        },\n      });\n      // Sync pending cycles when online\n      if (navigator.onLine) {\n        syncPendingCycles(db);\n      }\n    };\n    initDB();\n  }, [syncPendingCycles]);\n\n  const onSubmit = async (data) => {\n    const cycleData = {\n      startDate: data.startDate,\n      length: parseInt(data.length),\n      symptoms: data.symptoms.join(\",\"), // Convert array to comma-separated string\n      mood: data.mood,\n    };\n    const tempId = isEditing ? editId : Date.now();\n\n    if (!navigator.onLine) {\n      // Save to IndexedDB if offline\n      const db = await openDB(\"CycleTrackerDB\", 1);\n      await db.put(\"pendingCycles\", { ...cycleData, id: tempId });\n      setCycles([...cycles, { ...cycleData, ID: tempId }]);\n      resetForm();\n      return;\n    }\n\n    await submitCycle(cycleData, isEditing ? \"PUT\" : \"POST\", editId);\n  };\n\n  const handleEdit = (cycle) => {\n    setValue(\"startDate\", cycle.startDate);\n    setValue(\"length\", cycle.length);\n    setValue(\"symptoms\", cycle.symptoms ? cycle.symptoms.split(\",\") : []);\n    setValue(\"mood\", cycle.mood);\n    setEditId(cycle.ID);\n    setIsEditing(true);\n  };\n\n  const handleDelete = async (id) => {\n    if (!confirm(\"Are you sure you want to delete this entry?\")) return;\n\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await fetch(`http://localhost:8080/api/cycles/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (res.ok) {\n        fetchCycles();\n      } else {\n        console.error(\"Failed to delete entry\");\n      }\n    } catch (error) {\n      console.error(\"Delete error:\", error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen w-full bg-pink-50 dark:bg-gray-900 p-6\">\n      <div className=\"max-w-4xl mx-auto text-center mb-8\">\n        <h1 className=\"text-gray-700 dark:text-gray-200 text-xl\">\n          Track your cycles accurately and gain valuable health insights.\n        </h1>\n      </div>\n\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        className=\"max-w-4xl mx-auto p-8 rounded-3xl bg-[#1B2433] shadow-xl\"\n      >\n        <h2 className=\"text-3xl font-semibold mb-8 text-white text-center\">\n          {isEditing ? \"Edit Cycle\" : \"Cycle Journal\"}\n        </h2>\n\n        <div className=\"grid md:grid-cols-2 gap-8\">\n          <div className=\"space-y-6\">\n            <label className=\"block text-sm text-gray-300\">\n              <Calendar className=\"inline w-4 h-4 mr-2\" />\n              Start Date\n              <input\n                type=\"date\"\n                {...register(\"startDate\", {\n                  required: \"Start date is required\",\n                })}\n                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-[#2A3441] text-gray-200\"\n              />\n              {errors.startDate && (\n                <p className=\"text-red-500 text-sm\">\n                  {errors.startDate.message}\n                </p>\n              )}\n            </label>\n\n            <label className=\"block text-sm text-gray-300\">\n              <Clock className=\"inline w-4 h-4 mr-2\" />\n              Cycle Length (Days)\n              <input\n                type=\"number\"\n                {...register(\"length\", {\n                  required: \"Cycle length is required\",\n                  min: { value: 1, message: \"Minimum 1 day\" },\n                  max: { value: 99, message: \"Maximum 99 days\" },\n                })}\n                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-[#2A3441] text-gray-200\"\n              />\n              {errors.length && (\n                <p className=\"text-red-500 text-sm\">{errors.length.message}</p>\n              )}\n            </label>\n\n            <label className=\"block text-sm text-gray-300\">\n              <Heart className=\"inline w-4 h-4 mr-2\" />\n              Mood\n              <select\n                {...register(\"mood\")}\n                className=\"w-full mt-2 px-4 py-3 rounded-xl bg-[#2A3441] text-gray-200\"\n              >\n                <option value=\"\">Select mood</option>\n                {moodOptions.map((mood) => (\n                  <option key={mood} value={mood}>\n                    {mood}\n                  </option>\n                ))}\n              </select>\n            </label>\n          </div>\n\n          <label className=\"block text-sm text-gray-300\">\n            <Activity className=\"inline w-4 h-4 mr-2\" />\n            Symptoms\n            <div className=\"mt-2 space-y-2\">\n              {symptomOptions.map((symptom) => (\n                <label key={symptom} className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    value={symptom}\n                    {...register(\"symptoms\")}\n                    className=\"mr-2\"\n                  />\n                  {symptom}\n                </label>\n              ))}\n            </div>\n            {errors.symptoms && (\n              <p className=\"text-red-500 text-sm\">{errors.symptoms.message}</p>\n            )}\n          </label>\n        </div>\n\n        <div className=\"mt-8 flex justify-between items-center\">\n          <button\n            type=\"submit\"\n            className=\"px-8 py-3 rounded-xl bg-pink-500 hover:bg-pink-600 text-white font-medium text-lg\"\n          >\n            {isEditing ? \"Update Entry\" : \"Save Entry\"}\n          </button>\n\n          {isEditing && (\n            <button\n              type=\"button\"\n              onClick={resetForm}\n              className=\"text-sm text-gray-300 hover:text-white underline\"\n            >\n              Cancel Edit\n            </button>\n          )}\n        </div>\n      </form>\n\n      <div className=\"max-w-4xl mx-auto mt-12\">\n        <h3 className=\"text-xl font-medium mb-4 text-gray-800 dark:text-white\">\n          Past Entries\n        </h3>\n        <ul className=\"space-y-4\">\n          {cycles.map((entry) => (\n            <li\n              key={entry.ID}\n              className=\"bg-white dark:bg-[#2A3441] rounded-xl p-4 shadow flex justify-between items-center\"\n            >\n              <div>\n                <p className=\"text-gray-900 dark:text-gray-100 font-medium\">\n                  {entry.startDate} - {entry.length} days\n                </p>\n                <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                  Mood: {entry.mood} | Symptoms: {entry.symptoms}\n                </p>\n              </div>\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => handleEdit(entry)}\n                  className=\"text-blue-500 hover:text-blue-700\"\n                  title=\"Edit\"\n                >\n                  <Pencil className=\"w-5 h-5\" />\n                </button>\n                <button\n                  onClick={() => handleDelete(entry.ID)}\n                  className=\"text-red-500 hover:text-red-700\"\n                  title=\"Delete\"\n                >\n                  <Trash2 className=\"w-5 h-5\" />\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default CycleForm;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/HealthInsights.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n} from \"recharts\";\nimport { useAppContext } from \"../context/AppContext\";\n\nconst HealthInsights = () => {\n  const { cycles, token } = useAppContext();\n  const [insights, setInsights] = useState({\n    totalCycles: 0,\n    averageLength: 0,\n    nextPeriod: null,\n    fertileWindow: [],\n    irregularity: 0,\n  });\n\n  useEffect(() => {\n    const fetchInsights = async () => {\n      if (!token) return;\n      try {\n        const res = await fetch(\"http://localhost:8080/api/insights/cycle\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setInsights({\n            totalCycles: cycles.length,\n            averageLength: data.averageCycleLength || 0,\n            nextPeriod: data.nextPeriodPrediction || null,\n            fertileWindow: data.fertileWindow || [],\n            irregularity: data.irregularityIndex || 0,\n          });\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch insights:\", err);\n      }\n    };\n    fetchInsights();\n  }, [token, cycles]);\n\n  const chartData = cycles.map((cycle) => ({\n    date: cycle.startDate,\n    length: cycle.length,\n  }));\n\n  return (\n    <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n      <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n        Health Insights\n      </h2>\n      <div className=\"space-y-4\">\n        <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md bg-light-bg/50 dark:bg-dark-bg/50\">\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Cycle Summary\n          </h3>\n          <p className=\"text-foreground mb-3\">\n            <strong>Total Cycles Logged:</strong>{\" \"}\n            <span>{insights.totalCycles}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Average Cycle Length:</strong>{\" \"}\n            <span>{insights.averageLength.toFixed(2)} days</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Next Period Prediction:</strong>{\" \"}\n            <span>{insights.nextPeriod || \"N/A\"}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Fertile Window:</strong>{\" \"}\n            <span>{insights.fertileWindow.join(\" to \") || \"N/A\"}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Irregularity Index:</strong>{\" \"}\n            <span>{insights.irregularity.toFixed(2)}</span>\n          </p>\n        </div>\n        <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md bg-light-bg/50 dark:bg-dark-bg/50\">\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Cycle Length Trend\n          </h3>\n          <BarChart width={600} height={300} data={chartData}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"date\" />\n            <YAxis />\n            <Tooltip />\n            <Legend />\n            <Bar dataKey=\"length\" fill=\"#f472b6\" />\n          </BarChart>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HealthInsights;\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAXA;;;;;AAaA,MAAM,iBAAiB;IACrB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,gBAAa,AAAD;IACtC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,aAAa;QACb,eAAe;QACf,YAAY;QACZ,eAAe,EAAE;QACjB,cAAc;IAChB;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,IAAI,CAAC,OAAO;YACZ,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,4CAA4C;oBAClE,SAAS;wBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;oBAAC;gBAC9C;gBACA,IAAI,IAAI,EAAE,EAAE;oBACV,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,YAAY;wBACV,aAAa,OAAO,MAAM;wBAC1B,eAAe,KAAK,kBAAkB,IAAI;wBAC1C,YAAY,KAAK,oBAAoB,IAAI;wBACzC,eAAe,KAAK,aAAa,IAAI,EAAE;wBACvC,cAAc,KAAK,iBAAiB,IAAI;oBAC1C;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC7C;QACF;QACA;IACF,GAAG;QAAC;QAAO;KAAO;IAElB,MAAM,YAAY,OAAO,GAAG,CAAC,CAAC,QAAU,CAAC;YACvC,MAAM,MAAM,SAAS;YACrB,QAAQ,MAAM,MAAM;QACtB,CAAC;IAED,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA6C;;;;;;0BAG3D,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA2C;;;;;;0CAGzD,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAA8B;kDACtC,8OAAC;kDAAM,SAAS,WAAW;;;;;;;;;;;;0CAE7B,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAA+B;kDACvC,8OAAC;;4CAAM,SAAS,aAAa,CAAC,OAAO,CAAC;4CAAG;;;;;;;;;;;;;0CAE3C,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAiC;kDACzC,8OAAC;kDAAM,SAAS,UAAU,IAAI;;;;;;;;;;;;0CAEhC,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAyB;kDACjC,8OAAC;kDAAM,SAAS,aAAa,CAAC,IAAI,CAAC,WAAW;;;;;;;;;;;;0CAEhD,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAA6B;kDACrC,8OAAC;kDAAM,SAAS,YAAY,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;kCAGzC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA2C;;;;;;0CAGzD,8OAAC,oJAAA,CAAA,WAAQ;gCAAC,OAAO;gCAAK,QAAQ;gCAAK,MAAM;;kDACvC,8OAAC,6JAAA,CAAA,gBAAa;wCAAC,iBAAgB;;;;;;kDAC/B,8OAAC,qJAAA,CAAA,QAAK;wCAAC,SAAQ;;;;;;kDACf,8OAAC,qJAAA,CAAA,QAAK;;;;;kDACN,8OAAC,uJAAA,CAAA,UAAO;;;;;kDACR,8OAAC,sJAAA,CAAA,SAAM;;;;;kDACP,8OAAC,mJAAA,CAAA,MAAG;wCAAC,SAAQ;wCAAS,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvC;uCAEe","debugId":null}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/utils/cyclePredictor.js"],"sourcesContent":["export class EnhancedCyclePredictor {\n  constructor(history = []) {\n    this.history = history; // List of { startDate, length }\n  }\n\n  predictNextCycle() {\n    if (this.history.length < 2) return null;\n\n    const sorted = [...this.history].sort(\n      (a, b) => new Date(a.startDate) - new Date(b.startDate)\n    );\n\n    const lengths = [];\n    for (let i = 1; i < sorted.length; i++) {\n      const prev = new Date(sorted[i - 1].startDate);\n      const curr = new Date(sorted[i].startDate);\n      lengths.push((curr - prev) / (1000 * 60 * 60 * 24));\n    }\n\n    const avgLength = lengths.reduce((a, b) => a + b) / lengths.length;\n    const stdDev = Math.sqrt(\n      lengths.map((x) => Math.pow(x - avgLength, 2)).reduce((a, b) => a + b) /\n        lengths.length\n    );\n\n    const lastStart = new Date(sorted[sorted.length - 1].startDate);\n    const predicted = new Date(\n      lastStart.getTime() + avgLength * 24 * 60 * 60 * 1000\n    );\n\n    const fertileStart = new Date(\n      lastStart.getTime() + (avgLength - 14 - 5) * 24 * 60 * 60 * 1000\n    );\n    const fertileEnd = new Date(\n      lastStart.getTime() + (avgLength - 14 + 5) * 24 * 60 * 60 * 1000\n    );\n\n    return {\n      predictedStartDate: predicted.toISOString().split(\"T\")[0],\n      confidenceInterval: [\n        new Date(predicted.getTime() - stdDev * 24 * 60 * 60 * 1000)\n          .toISOString()\n          .split(\"T\")[0],\n        new Date(predicted.getTime() + stdDev * 24 * 60 * 60 * 1000)\n          .toISOString()\n          .split(\"T\")[0],\n      ],\n      averageCycleLength: avgLength.toFixed(1),\n      irregularityIndex: stdDev.toFixed(2),\n      fertileWindow: [\n        fertileStart.toISOString().split(\"T\")[0],\n        fertileEnd.toISOString().split(\"T\")[0],\n      ],\n    };\n  }\n\n  addCycle(cycleEntry) {\n    this.history.push(cycleEntry);\n  }\n}\n"],"names":[],"mappings":";;;AAAO,MAAM;IACX,YAAY,UAAU,EAAE,CAAE;QACxB,IAAI,CAAC,OAAO,GAAG,SAAS,gCAAgC;IAC1D;IAEA,mBAAmB;QACjB,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,OAAO;QAEpC,MAAM,SAAS;eAAI,IAAI,CAAC,OAAO;SAAC,CAAC,IAAI,CACnC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,SAAS,IAAI,IAAI,KAAK,EAAE,SAAS;QAGxD,MAAM,UAAU,EAAE;QAClB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;YACtC,MAAM,OAAO,IAAI,KAAK,MAAM,CAAC,IAAI,EAAE,CAAC,SAAS;YAC7C,MAAM,OAAO,IAAI,KAAK,MAAM,CAAC,EAAE,CAAC,SAAS;YACzC,QAAQ,IAAI,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;QACnD;QAEA,MAAM,YAAY,QAAQ,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,QAAQ,MAAM;QAClE,MAAM,SAAS,KAAK,IAAI,CACtB,QAAQ,GAAG,CAAC,CAAC,IAAM,KAAK,GAAG,CAAC,IAAI,WAAW,IAAI,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,KAClE,QAAQ,MAAM;QAGlB,MAAM,YAAY,IAAI,KAAK,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE,CAAC,SAAS;QAC9D,MAAM,YAAY,IAAI,KACpB,UAAU,OAAO,KAAK,YAAY,KAAK,KAAK,KAAK;QAGnD,MAAM,eAAe,IAAI,KACvB,UAAU,OAAO,KAAK,CAAC,YAAY,KAAK,CAAC,IAAI,KAAK,KAAK,KAAK;QAE9D,MAAM,aAAa,IAAI,KACrB,UAAU,OAAO,KAAK,CAAC,YAAY,KAAK,CAAC,IAAI,KAAK,KAAK,KAAK;QAG9D,OAAO;YACL,oBAAoB,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACzD,oBAAoB;gBAClB,IAAI,KAAK,UAAU,OAAO,KAAK,SAAS,KAAK,KAAK,KAAK,MACpD,WAAW,GACX,KAAK,CAAC,IAAI,CAAC,EAAE;gBAChB,IAAI,KAAK,UAAU,OAAO,KAAK,SAAS,KAAK,KAAK,KAAK,MACpD,WAAW,GACX,KAAK,CAAC,IAAI,CAAC,EAAE;aACjB;YACD,oBAAoB,UAAU,OAAO,CAAC;YACtC,mBAAmB,OAAO,OAAO,CAAC;YAClC,eAAe;gBACb,aAAa,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBACxC,WAAW,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;aACvC;QACH;IACF;IAEA,SAAS,UAAU,EAAE;QACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IACpB;AACF","debugId":null}},
    {"offset": {"line": 892, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/CycleHistory.js"],"sourcesContent":["\"use client\";\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { EnhancedCyclePredictor } from \"../utils/cyclePredictor\";\n\nconst CycleHistory = ({ cycles = [] }) => {\n  const prediction = useMemo(() => {\n    if (cycles.length < 2) return null;\n\n    const formattedHistory = cycles.map((cycle) => ({\n      startDate: cycle.startDate,\n      length: cycle.length,\n    }));\n\n    const predictor = new EnhancedCyclePredictor(formattedHistory);\n    return predictor.predictNextCycle();\n  }, [cycles]);\n\n  return (\n    <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n      <h2 className=\"text-xl font-semibold mb-4 text-foreground\">\n        Cycle History\n      </h2>\n\n      {prediction && (\n        <div className=\"mb-6 p-4 bg-accent/10 border border-accent/30 rounded-lg\">\n          <h3 className=\"text-lg font-medium mb-2 text-accent\">\n            Cycle Prediction\n          </h3>\n          <p className=\"text-foreground\">\n            <strong>Next Start Date:</strong> {prediction.predictedStartDate}\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Confidence Range:</strong>{\" \"}\n            {prediction.confidenceInterval[0]} →{\" \"}\n            {prediction.confidenceInterval[1]}\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Average Cycle Length:</strong>{\" \"}\n            {prediction.averageCycleLength} days\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Irregularity Index:</strong> {prediction.irregularityIndex}\n          </p>\n        </div>\n      )}\n\n      {cycles.length > 0 ? (\n        <ul className=\"space-y-4 overflow-y-auto max-h-[calc(100vh-12rem)]\">\n          {cycles.map((cycle, index) => (\n            <li\n              key={index}\n              className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md \n                         bg-light-bg/50 dark:bg-dark-bg/50 \n                         transition-colors duration-300 ease\"\n            >\n              <p className=\"text-foreground\">\n                <strong>Start Date: </strong>\n                {new Date(cycle.startDate).toLocaleDateString()}\n              </p>\n              <p className=\"text-foreground\">\n                <strong>Cycle Length:</strong> {cycle.length} days\n              </p>\n              <p className=\"text-foreground\">\n                <strong>Symptoms:</strong> {cycle.symptoms || \"None\"}\n              </p>\n              <p className=\"text-foreground\">\n                <strong>Mood:</strong> {cycle.mood || \"Not specified\"}\n              </p>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p className=\"text-foreground/80\">No cycles logged yet.</p>\n      )}\n    </div>\n  );\n};\n\nCycleHistory.propTypes = {\n  cycles: PropTypes.arrayOf(\n    PropTypes.shape({\n      startDate: PropTypes.string.isRequired,\n      length: PropTypes.number.isRequired,\n      symptoms: PropTypes.string,\n      mood: PropTypes.string,\n    })\n  ).isRequired,\n};\n\nexport default CycleHistory;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,EAAE;IACnC,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QACzB,IAAI,OAAO,MAAM,GAAG,GAAG,OAAO;QAE9B,MAAM,mBAAmB,OAAO,GAAG,CAAC,CAAC,QAAU,CAAC;gBAC9C,WAAW,MAAM,SAAS;gBAC1B,QAAQ,MAAM,MAAM;YACtB,CAAC;QAED,MAAM,YAAY,IAAI,qIAAA,CAAA,yBAAsB,CAAC;QAC7C,OAAO,UAAU,gBAAgB;IACnC,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA6C;;;;;;YAI1D,4BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAGrD,8OAAC;wBAAE,WAAU;;0CACX,8OAAC;0CAAO;;;;;;4BAAyB;4BAAE,WAAW,kBAAkB;;;;;;;kCAElE,8OAAC;wBAAE,WAAU;;0CACX,8OAAC;0CAAO;;;;;;4BAA2B;4BAClC,WAAW,kBAAkB,CAAC,EAAE;4BAAC;4BAAG;4BACpC,WAAW,kBAAkB,CAAC,EAAE;;;;;;;kCAEnC,8OAAC;wBAAE,WAAU;;0CACX,8OAAC;0CAAO;;;;;;4BAA+B;4BACtC,WAAW,kBAAkB;4BAAC;;;;;;;kCAEjC,8OAAC;wBAAE,WAAU;;0CACX,8OAAC;0CAAO;;;;;;4BAA4B;4BAAE,WAAW,iBAAiB;;;;;;;;;;;;;YAKvE,OAAO,MAAM,GAAG,kBACf,8OAAC;gBAAG,WAAU;0BACX,OAAO,GAAG,CAAC,CAAC,OAAO,sBAClB,8OAAC;wBAEC,WAAU;;0CAIV,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCACP,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB;;;;;;;0CAE/C,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAsB;oCAAE,MAAM,MAAM;oCAAC;;;;;;;0CAE/C,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAkB;oCAAE,MAAM,QAAQ,IAAI;;;;;;;0CAEhD,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAc;oCAAE,MAAM,IAAI,IAAI;;;;;;;;uBAhBnC;;;;;;;;;qCAsBX,8OAAC;gBAAE,WAAU;0BAAqB;;;;;;;;;;;;AAI1C;AAEA,aAAa,SAAS,GAAG;IACvB,QAAQ,sIAAA,CAAA,UAAS,CAAC,OAAO,CACvB,sIAAA,CAAA,UAAS,CAAC,KAAK,CAAC;QACd,WAAW,sIAAA,CAAA,UAAS,CAAC,MAAM,CAAC,UAAU;QACtC,QAAQ,sIAAA,CAAA,UAAS,CAAC,MAAM,CAAC,UAAU;QACnC,UAAU,sIAAA,CAAA,UAAS,CAAC,MAAM;QAC1B,MAAM,sIAAA,CAAA,UAAS,CAAC,MAAM;IACxB,IACA,UAAU;AACd;uCAEe","debugId":null}}]
}