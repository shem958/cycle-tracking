{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/HealthInsights.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n} from \"recharts\";\nimport { useAppContext } from \"../context/AppContext\";\n\nconst HealthInsights = () => {\n  const { cycles, token } = useAppContext();\n  const [insights, setInsights] = useState({\n    totalCycles: 0,\n    averageLength: 0,\n    nextPeriod: null,\n    fertileWindow: [],\n    irregularity: 0,\n  });\n\n  useEffect(() => {\n    const fetchInsights = async () => {\n      if (!token) return;\n      try {\n        const res = await fetch(\"http://localhost:8080/api/insights/cycle\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setInsights({\n            totalCycles: cycles.length,\n            averageLength: data.averageCycleLength || 0,\n            nextPeriod: data.nextPeriodPrediction || null,\n            fertileWindow: data.fertileWindow || [],\n            irregularity: data.irregularityIndex || 0,\n          });\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch insights:\", err);\n      }\n    };\n    fetchInsights();\n  }, [token, cycles]);\n\n  const chartData = cycles.map((cycle) => ({\n    date: cycle.startDate,\n    length: cycle.length,\n  }));\n\n  return (\n    <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n      <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n        Health Insights\n      </h2>\n      <div className=\"space-y-4\">\n        <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md bg-light-bg/50 dark:bg-dark-bg/50\">\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Cycle Summary\n          </h3>\n          <p className=\"text-foreground mb-3\">\n            <strong>Total Cycles Logged:</strong>{\" \"}\n            <span>{insights.totalCycles}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Average Cycle Length:</strong>{\" \"}\n            <span>{insights.averageLength.toFixed(2)} days</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Next Period Prediction:</strong>{\" \"}\n            <span>{insights.nextPeriod || \"N/A\"}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Fertile Window:</strong>{\" \"}\n            <span>{insights.fertileWindow.join(\" to \") || \"N/A\"}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Irregularity Index:</strong>{\" \"}\n            <span>{insights.irregularity.toFixed(2)}</span>\n          </p>\n        </div>\n        <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md bg-light-bg/50 dark:bg-dark-bg/50\">\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Cycle Length Trend\n          </h3>\n          <BarChart width={600} height={300} data={chartData}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"date\" />\n            <YAxis />\n            <Tooltip />\n            <Legend />\n            <Bar dataKey=\"length\" fill=\"#f472b6\" />\n          </BarChart>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HealthInsights;\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAXA;;;;;AAaA,MAAM,iBAAiB;IACrB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,gBAAa,AAAD;IACtC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,aAAa;QACb,eAAe;QACf,YAAY;QACZ,eAAe,EAAE;QACjB,cAAc;IAChB;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,IAAI,CAAC,OAAO;YACZ,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,4CAA4C;oBAClE,SAAS;wBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;oBAAC;gBAC9C;gBACA,IAAI,IAAI,EAAE,EAAE;oBACV,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,YAAY;wBACV,aAAa,OAAO,MAAM;wBAC1B,eAAe,KAAK,kBAAkB,IAAI;wBAC1C,YAAY,KAAK,oBAAoB,IAAI;wBACzC,eAAe,KAAK,aAAa,IAAI,EAAE;wBACvC,cAAc,KAAK,iBAAiB,IAAI;oBAC1C;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC7C;QACF;QACA;IACF,GAAG;QAAC;QAAO;KAAO;IAElB,MAAM,YAAY,OAAO,GAAG,CAAC,CAAC,QAAU,CAAC;YACvC,MAAM,MAAM,SAAS;YACrB,QAAQ,MAAM,MAAM;QACtB,CAAC;IAED,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA6C;;;;;;0BAG3D,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA2C;;;;;;0CAGzD,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAA8B;kDACtC,8OAAC;kDAAM,SAAS,WAAW;;;;;;;;;;;;0CAE7B,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAA+B;kDACvC,8OAAC;;4CAAM,SAAS,aAAa,CAAC,OAAO,CAAC;4CAAG;;;;;;;;;;;;;0CAE3C,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAiC;kDACzC,8OAAC;kDAAM,SAAS,UAAU,IAAI;;;;;;;;;;;;0CAEhC,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAAyB;kDACjC,8OAAC;kDAAM,SAAS,aAAa,CAAC,IAAI,CAAC,WAAW;;;;;;;;;;;;0CAEhD,8OAAC;gCAAE,WAAU;;kDACX,8OAAC;kDAAO;;;;;;oCAA6B;kDACrC,8OAAC;kDAAM,SAAS,YAAY,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;kCAGzC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA2C;;;;;;0CAGzD,8OAAC,oJAAA,CAAA,WAAQ;gCAAC,OAAO;gCAAK,QAAQ;gCAAK,MAAM;;kDACvC,8OAAC,6JAAA,CAAA,gBAAa;wCAAC,iBAAgB;;;;;;kDAC/B,8OAAC,qJAAA,CAAA,QAAK;wCAAC,SAAQ;;;;;;kDACf,8OAAC,qJAAA,CAAA,QAAK;;;;;kDACN,8OAAC,uJAAA,CAAA,UAAO;;;;;kDACR,8OAAC,sJAAA,CAAA,SAAM;;;;;kDACP,8OAAC,mJAAA,CAAA,MAAG;wCAAC,SAAQ;wCAAS,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvC;uCAEe","debugId":null}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/ProtectedRoute.js"],"sourcesContent":["\"use client\";\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAppContext } from \"../context/AppContext\";\n\nexport default function ProtectedRoute({ children, allowedRoles }) {\n  const { user, token } = useAppContext();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!token) {\n      router.push(\"/login\");\n    } else if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n      router.push(\"/\"); // Redirect to home if role not allowed\n    }\n  }, [token, user, allowedRoles, router]);\n\n  if (!token || (allowedRoles && user && !allowedRoles.includes(user.role))) {\n    return null;\n  }\n\n  return children;\n}\n"],"names":[],"mappings":";;;AACA;AACA;AACA;AAHA;;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,EAAE;IAC/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,gBAAa,AAAD;IACpC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,CAAC;QACd,OAAO,IAAI,gBAAgB,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;YACpE,OAAO,IAAI,CAAC,MAAM,uCAAuC;QAC3D;IACF,GAAG;QAAC;QAAO;QAAM;QAAc;KAAO;IAEtC,IAAI,CAAC,SAAU,gBAAgB,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAI;QACzE,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 341, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/insights/page.js"],"sourcesContent":["\"use client\";\nimport { useEffect } from \"react\";\nimport HealthInsights from \"@/app/components/HealthInsights\";\nimport Calendar from \"react-calendar\";\nimport { useAppContext } from \"@/app/context/AppContext\";\nimport ProtectedRoute from \"@/app/components/ProtectedRoute\";\nimport \"react-calendar/dist/Calendar.css\";\n\nexport default function HealthInsightsPage() {\n  const { cycles, fetchCycles } = useAppContext();\n\n  useEffect(() => {\n    fetchCycles();\n  }, [fetchCycles]);\n\n  const tileContent = ({ date }) => {\n    const cycle = cycles.find(\n      (c) => new Date(c.startDate).toDateString() === date.toDateString()\n    );\n    return cycle ? <p className=\"text-pink-500 font-bold\">‚óè</p> : null;\n  };\n\n  return (\n    <ProtectedRoute allowedRoles={[\"user\", \"doctor\", \"admin\"]}>\n      <div className=\"p-6\">\n        <h1 className=\"text-2xl font-semibold mb-4\">Health Insights</h1>\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <HealthInsights />\n          <div className=\"bg-background p-6 rounded-lg shadow-md\">\n            <h2 className=\"text-xl font-semibold mb-4 text-foreground\">\n              Cycle Calendar\n            </h2>\n            <Calendar\n              tileContent={tileContent}\n              className=\"border-none bg-transparent\"\n            />\n          </div>\n        </div>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;;AAQe,SAAS;IACtB,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,gBAAa,AAAD;IAE5C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG;QAAC;KAAY;IAEhB,MAAM,cAAc,CAAC,EAAE,IAAI,EAAE;QAC3B,MAAM,QAAQ,OAAO,IAAI,CACvB,CAAC,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,YAAY,OAAO,KAAK,YAAY;QAEnE,OAAO,sBAAQ,8OAAC;YAAE,WAAU;sBAA0B;;;;;mBAAQ;IAChE;IAEA,qBACE,8OAAC,0IAAA,CAAA,UAAc;QAAC,cAAc;YAAC;YAAQ;YAAU;SAAQ;kBACvD,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA8B;;;;;;8BAC5C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,0IAAA,CAAA,UAAc;;;;;sCACf,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAA6C;;;;;;8CAG3D,8OAAC,kKAAA,CAAA,UAAQ;oCACP,aAAa;oCACb,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxB","debugId":null}}]
}