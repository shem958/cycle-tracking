{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/HealthInsights.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from \"recharts\";\nimport { useAppContext } from \"../context/AppContext\";\n\nconst HealthInsights = () => {\n  const { cycles, token } = useAppContext();\n  const [insights, setInsights] = useState({\n    totalCycles: 0,\n    averageLength: 0,\n    nextPeriod: null,\n    fertileWindow: [],\n    irregularity: 0,\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchInsights = async () => {\n      if (!token) {\n        setError(\"Authentication required\");\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const res = await fetch(\"http://localhost:8080/api/insights/cycle\", {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        });\n\n        if (res.status === 401) {\n          setError(\"Session expired. Please log in again.\");\n          return;\n        }\n\n        if (!res.ok) {\n          const errorData = await res.json().catch(() => ({}));\n          throw new Error(\n            errorData.message || `HTTP ${res.status}: Failed to fetch insights`\n          );\n        }\n\n        const data = await res.json();\n\n        setInsights({\n          totalCycles: cycles.length,\n          averageLength: data.averageCycleLength || 0,\n          nextPeriod: data.nextPeriodPrediction || null,\n          fertileWindow: data.fertileWindow || [],\n          irregularity: data.irregularityIndex || 0,\n        });\n      } catch (err) {\n        console.error(\"Failed to fetch insights:\", err);\n        setError(err.message || \"Failed to load insights data\");\n\n        // Fallback to basic calculations from cycles data\n        if (cycles.length > 0) {\n          const avgLength =\n            cycles.reduce((sum, cycle) => sum + cycle.length, 0) /\n            cycles.length;\n          setInsights({\n            totalCycles: cycles.length,\n            averageLength: avgLength,\n            nextPeriod: null,\n            fertileWindow: [],\n            irregularity: 0,\n          });\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchInsights();\n  }, [token, cycles]);\n\n  // Prepare chart data\n  const chartData = cycles.map((cycle, index) => ({\n    cycle: `Cycle ${index + 1}`,\n    date: new Date(cycle.startDate).toLocaleDateString(),\n    length: cycle.length,\n  }));\n\n  // Loading state\n  if (loading) {\n    return (\n      <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n        <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n          Health Insights\n        </h2>\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n        <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n          Health Insights\n        </h2>\n        <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n          <p className=\"text-red-800 dark:text-red-200 text-sm\">{error}</p>\n          <p className=\"text-red-600 dark:text-red-400 text-xs mt-2\">\n            Showing basic calculations from your cycle data.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n      <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n        Health Insights\n      </h2>\n\n      {cycles.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"text-6xl mb-4\">ðŸ“Š</div>\n          <p className=\"text-foreground/80 text-lg mb-2\">\n            No data to analyze yet\n          </p>\n          <p className=\"text-foreground/60 text-sm\">\n            Track at least 2 cycles to see detailed health insights and\n            predictions.\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {/* Cycle Summary */}\n          <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-lg bg-light-bg/50 dark:bg-dark-bg/50\">\n            <h3 className=\"text-lg font-medium text-foreground mb-3\">\n              Cycle Summary\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-foreground\">\n                  <strong>Total Cycles Logged:</strong>{\" \"}\n                  <span className=\"text-pink-500 font-bold\">\n                    {insights.totalCycles}\n                  </span>\n                </p>\n                <p className=\"text-foreground mt-2\">\n                  <strong>Average Cycle Length:</strong>{\" \"}\n                  <span className=\"text-pink-500 font-bold\">\n                    {insights.averageLength.toFixed(1)} days\n                  </span>\n                </p>\n              </div>\n              <div>\n                <p className=\"text-foreground\">\n                  <strong>Next Period Prediction:</strong>{\" \"}\n                  <span className=\"text-blue-500 font-bold\">\n                    {insights.nextPeriod || \"Calculating...\"}\n                  </span>\n                </p>\n                <p className=\"text-foreground mt-2\">\n                  <strong>Irregularity Index:</strong>{\" \"}\n                  <span\n                    className={`font-bold ${\n                      insights.irregularity < 0.3\n                        ? \"text-green-500\"\n                        : insights.irregularity < 0.6\n                        ? \"text-yellow-500\"\n                        : \"text-red-500\"\n                    }`}\n                  >\n                    {insights.irregularity.toFixed(2)}\n                  </span>\n                </p>\n              </div>\n            </div>\n\n            {insights.fertileWindow.length > 0 && (\n              <p className=\"text-foreground mt-3\">\n                <strong>Fertile Window:</strong>{\" \"}\n                <span className=\"text-purple-500 font-bold\">\n                  {insights.fertileWindow.join(\" to \")}\n                </span>\n              </p>\n            )}\n          </div>\n\n          {/* Cycle Length Trend Chart */}\n          <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-lg bg-light-bg/50 dark:bg-dark-bg/50\">\n            <h3 className=\"text-lg font-medium text-foreground mb-4\">\n              Cycle Length Trend\n            </h3>\n            {chartData.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\n                  <XAxis dataKey=\"cycle\" stroke=\"#9CA3AF\" fontSize={12} />\n                  <YAxis stroke=\"#9CA3AF\" fontSize={12} />\n                  <Tooltip\n                    contentStyle={{\n                      backgroundColor: \"#1F2937\",\n                      border: \"1px solid #374151\",\n                      borderRadius: \"8px\",\n                      color: \"#F3F4F6\",\n                    }}\n                  />\n                  <Legend />\n                  <Bar\n                    dataKey=\"length\"\n                    fill=\"#EC4899\"\n                    name=\"Cycle Length (days)\"\n                    radius={[4, 4, 0, 0]}\n                  />\n                </BarChart>\n              </ResponsiveContainer>\n            ) : (\n              <div className=\"text-center py-8\">\n                <p className=\"text-foreground/60\">No chart data available</p>\n              </div>\n            )}\n          </div>\n\n          {/* Health Tips */}\n          <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-lg bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20\">\n            <h3 className=\"text-lg font-medium text-foreground mb-3\">\n              ðŸ’¡ Health Tips\n            </h3>\n            <div className=\"space-y-2 text-sm\">\n              {insights.averageLength < 21 && (\n                <p className=\"text-orange-700 dark:text-orange-300\">\n                  Your cycles are shorter than average. Consider consulting a\n                  healthcare provider.\n                </p>\n              )}\n              {insights.averageLength > 35 && (\n                <p className=\"text-orange-700 dark:text-orange-300\">\n                  Your cycles are longer than average. Consider consulting a\n                  healthcare provider.\n                </p>\n              )}\n              {insights.irregularity > 0.5 && (\n                <p className=\"text-red-700 dark:text-red-300\">\n                  Your cycles show high irregularity. Track stress, diet, and\n                  exercise patterns.\n                </p>\n              )}\n              {insights.irregularity <= 0.3 && insights.totalCycles > 3 && (\n                <p className=\"text-green-700 dark:text-green-300\">\n                  Great! Your cycles are quite regular. Keep up your healthy\n                  habits.\n                </p>\n              )}\n              <p className=\"text-gray-700 dark:text-gray-300\">\n                Regular tracking helps identify patterns and potential health\n                concerns early.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HealthInsights;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/ProtectedRoute.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAppContext } from \"../context/AppContext\";\n\nexport default function ProtectedRoute({ children, allowedRoles }) {\n  const { user, token, isTokenExpired } = useAppContext();\n  const router = useRouter();\n  const [isLoading, setIsLoading] = useState(true);\n  const [isAuthorized, setIsAuthorized] = useState(false);\n\n  useEffect(() => {\n    const checkAuth = () => {\n      // No token means not authenticated\n      if (!token || isTokenExpired(token)) {\n        setIsAuthorized(false);\n        setIsLoading(false);\n        router.push(\"/login\");\n        return;\n      }\n\n      // Check role authorization if roles are specified\n      if (allowedRoles && user) {\n        if (!allowedRoles.includes(user.role)) {\n          setIsAuthorized(false);\n          setIsLoading(false);\n          router.push(\"/\"); // Redirect to home if role not allowed\n          return;\n        }\n      }\n\n      // If we have token and user passes role check\n      if (user) {\n        setIsAuthorized(true);\n        setIsLoading(false);\n      } else {\n        // Wait a bit more for user data to load\n        setTimeout(() => {\n          if (!user) {\n            setIsAuthorized(false);\n            setIsLoading(false);\n            router.push(\"/login\");\n          }\n        }, 1000);\n      }\n    };\n\n    checkAuth();\n  }, [token, user, allowedRoles, router, isTokenExpired]);\n\n  // Show loading spinner while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto\"></div>\n          <p className=\"mt-4 text-foreground/70\">Checking authentication...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Don't render children if not authorized\n  if (!isAuthorized) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-semibold text-foreground mb-2\">\n            Access Denied\n          </h2>\n          <p className=\"text-foreground/70\">\n            You don&apos;t have permission to access this page.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return children;\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,EAAE;IAC/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,cAAc,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,gBAAa,AAAD;IACpD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,mCAAmC;YACnC,IAAI,CAAC,SAAS,eAAe,QAAQ;gBACnC,gBAAgB;gBAChB,aAAa;gBACb,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,kDAAkD;YAClD,IAAI,gBAAgB,MAAM;gBACxB,IAAI,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;oBACrC,gBAAgB;oBAChB,aAAa;oBACb,OAAO,IAAI,CAAC,MAAM,uCAAuC;oBACzD;gBACF;YACF;YAEA,8CAA8C;YAC9C,IAAI,MAAM;gBACR,gBAAgB;gBAChB,aAAa;YACf,OAAO;gBACL,wCAAwC;gBACxC,WAAW;oBACT,IAAI,CAAC,MAAM;wBACT,gBAAgB;wBAChB,aAAa;wBACb,OAAO,IAAI,CAAC;oBACd;gBACF,GAAG;YACL;QACF;QAEA;IACF,GAAG;QAAC;QAAO;QAAM;QAAc;QAAQ;KAAe;IAEtD,qDAAqD;IACrD,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAA0B;;;;;;;;;;;;;;;;;IAI/C;IAEA,0CAA0C;IAC1C,IAAI,CAAC,cAAc;QACjB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA8C;;;;;;kCAG5D,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAM1C;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 718, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/insights/page.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport HealthInsights from \"@/app/components/HealthInsights\";\nimport Calendar from \"react-calendar\";\nimport { useAppContext } from \"@/app/context/AppContext\";\nimport ProtectedRoute from \"@/app/components/ProtectedRoute\";\nimport \"react-calendar/dist/Calendar.css\";\n\nexport default function HealthInsightsPage() {\n  const { cycles, fetchCycles, token } = useAppContext();\n  const [selectedDate, setSelectedDate] = useState(new Date());\n\n  useEffect(() => {\n    if (token) {\n      fetchCycles();\n    }\n  }, [fetchCycles, token]);\n\n  const tileContent = ({ date, view }) => {\n    if (view !== \"month\") return null;\n\n    const cycle = cycles.find(\n      (c) => new Date(c.startDate).toDateString() === date.toDateString()\n    );\n\n    if (cycle) {\n      return (\n        <div className=\"flex flex-col items-center\">\n          <div className=\"w-2 h-2 bg-pink-500 rounded-full\"></div>\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  const tileClassName = ({ date, view }) => {\n    if (view !== \"month\") return \"\";\n\n    const cycle = cycles.find(\n      (c) => new Date(c.startDate).toDateString() === date.toDateString()\n    );\n\n    if (cycle) {\n      return \"cycle-date\";\n    }\n\n    return \"\";\n  };\n\n  return (\n    <ProtectedRoute allowedRoles={[\"user\", \"doctor\", \"admin\"]}>\n      <div className=\"p-6 max-w-7xl mx-auto\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-semibold text-foreground\">\n            Health Insights\n          </h1>\n          <p className=\"text-foreground/70 mt-1\">\n            Analyze your cycle patterns and get personalized health insights\n          </p>\n        </div>\n\n        <div className=\"grid lg:grid-cols-3 gap-6\">\n          {/* Health Insights - Takes up 2 columns */}\n          <div className=\"lg:col-span-2\">\n            <HealthInsights />\n          </div>\n\n          {/* Calendar - Takes up 1 column */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-background p-6 rounded-lg shadow-md h-full\">\n              <h2 className=\"text-xl font-semibold mb-4 text-foreground\">\n                Cycle Calendar\n              </h2>\n\n              <div className=\"calendar-container\">\n                <Calendar\n                  onChange={setSelectedDate}\n                  value={selectedDate}\n                  tileContent={tileContent}\n                  tileClassName={tileClassName}\n                  className=\"border-none bg-transparent text-foreground\"\n                />\n              </div>\n\n              {/* Legend */}\n              <div className=\"mt-4 p-3 bg-light-bg/50 dark:bg-dark-bg/50 rounded-lg\">\n                <h3 className=\"text-sm font-medium text-foreground mb-2\">\n                  Legend\n                </h3>\n                <div className=\"flex items-center gap-2 text-sm text-foreground/80\">\n                  <div className=\"w-3 h-3 bg-pink-500 rounded-full\"></div>\n                  <span>Cycle Start Date</span>\n                </div>\n              </div>\n\n              {/* Quick Stats */}\n              {cycles.length > 0 && (\n                <div className=\"mt-4 space-y-2\">\n                  <div className=\"text-sm\">\n                    <span className=\"text-foreground/70\">Total Cycles:</span>\n                    <span className=\"font-semibold text-foreground ml-2\">\n                      {cycles.length}\n                    </span>\n                  </div>\n                  <div className=\"text-sm\">\n                    <span className=\"text-foreground/70\">Last Cycle:</span>\n                    <span className=\"font-semibold text-foreground ml-2\">\n                      {cycles.length > 0\n                        ? new Date(\n                            Math.max(\n                              ...cycles.map((c) => new Date(c.startDate))\n                            )\n                          ).toLocaleDateString()\n                        : \"N/A\"}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Additional Information */}\n        <div className=\"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg border border-blue-200 dark:border-blue-700\">\n          <h3 className=\"font-medium text-foreground mb-2\">\n            ðŸ“Š Understanding Your Data\n          </h3>\n          <div className=\"grid md:grid-cols-2 gap-4 text-sm text-foreground/80\">\n            <div>\n              <h4 className=\"font-medium text-foreground\">Cycle Length</h4>\n              <p>Normal range is 21-35 days. Track for patterns over time.</p>\n            </div>\n            <div>\n              <h4 className=\"font-medium text-foreground\">\n                Irregularity Index\n              </h4>\n              <p>\n                Lower values indicate more regular cycles. &lt;0.3 is considered\n                regular.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <style jsx global>{`\n        .calendar-container .react-calendar {\n          width: 100%;\n          background: transparent;\n          border: none;\n          font-family: inherit;\n        }\n\n        .calendar-container .react-calendar__tile {\n          background: transparent;\n          border: 1px solid transparent;\n          color: inherit;\n          position: relative;\n        }\n\n        .calendar-container .react-calendar__tile:hover {\n          background-color: rgba(236, 72, 153, 0.1);\n        }\n\n        .calendar-container .react-calendar__tile--active {\n          background-color: rgb(236, 72, 153);\n          color: white;\n        }\n\n        .calendar-container .react-calendar__tile.cycle-date {\n          background-color: rgba(236, 72, 153, 0.2);\n          font-weight: bold;\n        }\n\n        .calendar-container .react-calendar__navigation button {\n          background: transparent;\n          color: inherit;\n          border: none;\n          font-size: 0.875rem;\n        }\n\n        .calendar-container .react-calendar__navigation button:hover {\n          background-color: rgba(236, 72, 153, 0.1);\n        }\n      `}</style>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;;;AAQe,SAAS;IACtB,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,mIAAA,CAAA,gBAAa,AAAD;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,IAAI;IAErD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,OAAO;YACT;QACF;IACF,GAAG;QAAC;QAAa;KAAM;IAEvB,MAAM,cAAc,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE;QACjC,IAAI,SAAS,SAAS,OAAO;QAE7B,MAAM,QAAQ,OAAO,IAAI,CACvB,CAAC,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,YAAY,OAAO,KAAK,YAAY;QAGnE,IAAI,OAAO;YACT,qBACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;;QAGrB;QAEA,OAAO;IACT;IAEA,MAAM,gBAAgB,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE;QACnC,IAAI,SAAS,SAAS,OAAO;QAE7B,MAAM,QAAQ,OAAO,IAAI,CACvB,CAAC,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,YAAY,OAAO,KAAK,YAAY;QAGnE,IAAI,OAAO;YACT,OAAO;QACT;QAEA,OAAO;IACT;IAEA,qBACE,8OAAC,0IAAA,CAAA,UAAc;QAAC,cAAc;YAAC;YAAQ;YAAU;SAAQ;;0BACvD,8OAAC;0DAAc;;kCACb,8OAAC;kEAAc;;0CACb,8OAAC;0EAAa;0CAAyC;;;;;;0CAGvD,8OAAC;0EAAY;0CAA0B;;;;;;;;;;;;kCAKzC,8OAAC;kEAAc;;0CAEb,8OAAC;0EAAc;0CACb,cAAA,8OAAC,0IAAA,CAAA,UAAc;;;;;;;;;;0CAIjB,8OAAC;0EAAc;0CACb,cAAA,8OAAC;8EAAc;;sDACb,8OAAC;sFAAa;sDAA6C;;;;;;sDAI3D,8OAAC;sFAAc;sDACb,cAAA,8OAAC,kKAAA,CAAA,UAAQ;gDACP,UAAU;gDACV,OAAO;gDACP,aAAa;gDACb,eAAe;gDACf,WAAU;;;;;;;;;;;sDAKd,8OAAC;sFAAc;;8DACb,8OAAC;8FAAa;8DAA2C;;;;;;8DAGzD,8OAAC;8FAAc;;sEACb,8OAAC;sGAAc;;;;;;sEACf,8OAAC;;sEAAK;;;;;;;;;;;;;;;;;;wCAKT,OAAO,MAAM,GAAG,mBACf,8OAAC;sFAAc;;8DACb,8OAAC;8FAAc;;sEACb,8OAAC;sGAAe;sEAAqB;;;;;;sEACrC,8OAAC;sGAAe;sEACb,OAAO,MAAM;;;;;;;;;;;;8DAGlB,8OAAC;8FAAc;;sEACb,8OAAC;sGAAe;sEAAqB;;;;;;sEACrC,8OAAC;sGAAe;sEACb,OAAO,MAAM,GAAG,IACb,IAAI,KACF,KAAK,GAAG,IACH,OAAO,GAAG,CAAC,CAAC,IAAM,IAAI,KAAK,EAAE,SAAS,KAE3C,kBAAkB,KACpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAUlB,8OAAC;kEAAc;;0CACb,8OAAC;0EAAa;0CAAmC;;;;;;0CAGjD,8OAAC;0EAAc;;kDACb,8OAAC;;;0DACC,8OAAC;0FAAa;0DAA8B;;;;;;0DAC5C,8OAAC;;0DAAE;;;;;;;;;;;;kDAEL,8OAAC;;;0DACC,8OAAC;0FAAa;0DAA8B;;;;;;0DAG5C,8OAAC;;0DAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDjB","debugId":null}}]
}