{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/HealthInsights.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n} from \"recharts\";\nimport { useAppContext } from \"../context/AppContext\";\n\nconst HealthInsights = () => {\n  const { cycles, token } = useAppContext();\n  const [insights, setInsights] = useState({\n    totalCycles: 0,\n    averageLength: 0,\n    nextPeriod: null,\n    fertileWindow: [],\n    irregularity: 0,\n  });\n\n  useEffect(() => {\n    const fetchInsights = async () => {\n      if (!token) return;\n      try {\n        const res = await fetch(\"http://localhost:8080/api/insights/cycle\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setInsights({\n            totalCycles: cycles.length,\n            averageLength: data.averageCycleLength || 0,\n            nextPeriod: data.nextPeriodPrediction || null,\n            fertileWindow: data.fertileWindow || [],\n            irregularity: data.irregularityIndex || 0,\n          });\n        }\n      } catch (err) {\n        console.error(\"Failed to fetch insights:\", err);\n      }\n    };\n    fetchInsights();\n  }, [token, cycles]);\n\n  const chartData = cycles.map((cycle) => ({\n    date: cycle.startDate,\n    length: cycle.length,\n  }));\n\n  return (\n    <div className=\"flex-1 bg-background p-6 rounded-lg shadow-md transition-colors duration-300 ease h-full\">\n      <h2 className=\"text-xl font-semibold mb-6 text-foreground\">\n        Health Insights\n      </h2>\n      <div className=\"space-y-4\">\n        <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md bg-light-bg/50 dark:bg-dark-bg/50\">\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Cycle Summary\n          </h3>\n          <p className=\"text-foreground mb-3\">\n            <strong>Total Cycles Logged:</strong>{\" \"}\n            <span>{insights.totalCycles}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Average Cycle Length:</strong>{\" \"}\n            <span>{insights.averageLength.toFixed(2)} days</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Next Period Prediction:</strong>{\" \"}\n            <span>{insights.nextPeriod || \"N/A\"}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Fertile Window:</strong>{\" \"}\n            <span>{insights.fertileWindow.join(\" to \") || \"N/A\"}</span>\n          </p>\n          <p className=\"text-foreground\">\n            <strong>Irregularity Index:</strong>{\" \"}\n            <span>{insights.irregularity.toFixed(2)}</span>\n          </p>\n        </div>\n        <div className=\"p-4 border border-light-text/20 dark:border-dark-text/20 rounded-md bg-light-bg/50 dark:bg-dark-bg/50\">\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">\n            Cycle Length Trend\n          </h3>\n          <BarChart width={600} height={300} data={chartData}>\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"date\" />\n            <YAxis />\n            <Tooltip />\n            <Legend />\n            <Bar dataKey=\"length\" fill=\"#f472b6\" />\n          </BarChart>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HealthInsights;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/components/ProtectedRoute.js"],"sourcesContent":["\"use client\";\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAppContext } from \"../context/AppContext\";\n\nexport default function ProtectedRoute({ children, allowedRoles }) {\n  const { user, token } = useAppContext();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!token) {\n      router.push(\"/login\");\n    } else if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n      router.push(\"/\"); // Redirect to home if role not allowed\n    }\n  }, [token, user, allowedRoles, router]);\n\n  if (!token || (allowedRoles && user && !allowedRoles.includes(user.role))) {\n    return null;\n  }\n\n  return children;\n}\n"],"names":[],"mappings":";;;AACA;AACA;AACA;;AAHA;;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,EAAE;;IAC/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,sIAAA,CAAA,gBAAa,AAAD;IACpC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,IAAI,CAAC,OAAO;gBACV,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,gBAAgB,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;gBACpE,OAAO,IAAI,CAAC,MAAM,uCAAuC;YAC3D;QACF;mCAAG;QAAC;QAAO;QAAM;QAAc;KAAO;IAEtC,IAAI,CAAC,SAAU,gBAAgB,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAI;QACzE,OAAO;IACT;IAEA,OAAO;AACT;GAjBwB;;QACE,sIAAA,CAAA,gBAAa;QACtB,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":["file:///home/shercy/cycle-tracking/src/app/insights/page.js"],"sourcesContent":["\"use client\";\nimport { useEffect } from \"react\";\nimport HealthInsights from \"@/app/components/HealthInsights\";\nimport Calendar from \"react-calendar\";\nimport { useAppContext } from \"@/app/context/AppContext\";\nimport ProtectedRoute from \"@/app/components/ProtectedRoute\";\nimport \"react-calendar/dist/Calendar.css\";\n\nexport default function HealthInsightsPage() {\n  const { cycles, fetchCycles } = useAppContext();\n\n  useEffect(() => {\n    fetchCycles();\n  }, [fetchCycles]);\n\n  const tileContent = ({ date }) => {\n    const cycle = cycles.find(\n      (c) => new Date(c.startDate).toDateString() === date.toDateString()\n    );\n    return cycle ? <p className=\"text-pink-500 font-bold\">‚óè</p> : null;\n  };\n\n  return (\n    <ProtectedRoute allowedRoles={[\"user\", \"doctor\", \"admin\"]}>\n      <div className=\"p-6\">\n        <h1 className=\"text-2xl font-semibold mb-4\">Health Insights</h1>\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <HealthInsights />\n          <div className=\"bg-background p-6 rounded-lg shadow-md\">\n            <h2 className=\"text-xl font-semibold mb-4 text-foreground\">\n              Cycle Calendar\n            </h2>\n            <Calendar\n              tileContent={tileContent}\n              className=\"border-none bg-transparent\"\n            />\n          </div>\n        </div>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;;;AALA;;;;;;;AAQe,SAAS;;IACtB,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,sIAAA,CAAA,gBAAa,AAAD;IAE5C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;wCAAE;YACR;QACF;uCAAG;QAAC;KAAY;IAEhB,MAAM,cAAc,CAAC,EAAE,IAAI,EAAE;QAC3B,MAAM,QAAQ,OAAO,IAAI,CACvB,CAAC,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,YAAY,OAAO,KAAK,YAAY;QAEnE,OAAO,sBAAQ,6LAAC;YAAE,WAAU;sBAA0B;;;;;mBAAQ;IAChE;IAEA,qBACE,6LAAC,6IAAA,CAAA,UAAc;QAAC,cAAc;YAAC;YAAQ;YAAU;SAAQ;kBACvD,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAA8B;;;;;;8BAC5C,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,6IAAA,CAAA,UAAc;;;;;sCACf,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAA6C;;;;;;8CAG3D,6LAAC,qKAAA,CAAA,UAAQ;oCACP,aAAa;oCACb,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxB;GAjCwB;;QACU,sIAAA,CAAA,gBAAa;;;KADvB","debugId":null}}]
}